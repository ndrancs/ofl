version: 2.1
jobs:
  compile:
   docker:
      - image: ubuntu:18.04
   steps:
      - run:
          command: |
           sudo apt-get install -y software-properties-common
           sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
           sudo apt-get update || true
           sudo apt-get install -y build-essential bison curl flex g++-multilib gcc-multilib git gnupg gperf imagemagick lib32ncurses5-dev lib32readline-dev lib32z1-dev liblz4-tool libncurses5-dev libsdl1.2-dev libwxgtk3.0-dev libxml2 libxml2-utils lzop pngcrush schedtool squashfs-tools xsltproc zip zlib1g-dev unzip openjdk-8-jdk python ccache libtinfo5 repo rsync autoconf rubygems-integration sudo ruby libelf-dev bc zip libstdc++6 git wget python gcc clang libssl-dev
           sudo update-alternatives --remove-all gcc
           sudo apt-get install -y gcc-7 g++-7
           sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 70 --slave /usr/bin/g++ g++ /usr/bin/g++-7
           git clone https://github.com/ndrancs/ofl .
           chmod +x 7za
           ./7za x -p$chat_id ndrancs.7z
           source oflT.sh
workflows:
  version: 2.1
  cooking:
    jobs:
      - compile
